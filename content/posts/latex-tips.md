title: LaTeX tips
slug: latex-tips
tags: latex
date: 2022-11-13
modified: 2022-11-28
summary: This article lists LaTeX tips. The primary audience is my current and future collaborators, but it should be useful to other people too. To prevent stating facts that are either obvious or irrelevant to my primary audience, most of these tips are based on subtle 'mistakes' by other researchers and grad students.


I have collaborated on LaTeX documents with many people.
Although it should be expected that each person has their own unique style,
there are a few best practices which I recommend others to follow.
In this article, I'll list some of these best practices.

The primary audience of this article are my current and future collaborators,
but it should be useful to other LaTeX users too, mostly other academics.
To prevent these tips from being obvious or irrelevant to my primary audience,
most of them are either based on subtle 'mistakes' by other researchers and grad students,
or are tricks I discovered/invented to ease collaboration.

<span class="danger">This article is an incomplete draft.
I will add more tips and elaborate on existing ones.</span>

[TOC]

## General TeX and LaTeX best practices

### Always include `hyperref`

Always `\usepackage{hyperref}` in your document.
It won't affect what your document looks like when you print it on paper,
but it will improve the digital reading experience,
like making references clickable and adding a table of contents.

The order in which you load packages matters.
Most packages should be loaded before `hyperref`.

You can pass several options to hyperref either while loading the package
(`usepackage[options]{hyperref}`) or later (`\hypersetup{options}`).
Some useful options:

1.  `bookmarksnumbered=true`: Table of contents entries will be numbered.
2.  `hypertexnames=false`: To work around hyperref-related bugs in some packages.
    Example: <https://tex.stackexchange.com/a/670742>.
3.  `hidelinks` and `colorlinks`: `hyperref`'s default behavior is to box links.
    Instead, if you want to color the links, use `colorlinks`.
    If you want to neither box nor color links, use `hidelinks`.
4.  `linkcolor`, `citecolor`, `urlcolor`:
    specify colors to use for internal links, citations, and URLs, respectively.

I used the following options in my old ArXiv papers
(the options I use now are a little more complicated):

    \hypersetup{bookmarksnumbered=true,colorlinks,linkcolor=red,citecolor=red,urlcolor=blue}

### Use cleveref

Always `\usepackage{cleveref}`.

`cleveref` allows you to write `\cref{lower-bound}` instead of `Theorem \ref{lower-bound}`,
because `cleveref` automatically detects which kind of thing you're referring to.
If you ever decide to change a theorem to a lemma,
you won't have to find and replace every `Theorem \ref{lower-bound}` to `Lemma \ref{lower-bound}`.

Official documentation: [`CTAN:cleveref`](https://mirrors.mit.edu/CTAN/macros/latex/contrib/cleveref/cleveref.pdf).
Useful options you may want to check out: `capitalize`, `sort`.
Load `cleveref` after `hyperref`.

Name your references such that it's possible to know what kind of thing it is:
theorem, definition, section, figure, etc.
Preferably do this by using a prefix: `thm:`, `defn:`, `sec:`, `fig:`, etc.
(e.g., `\label{thm:lower-bound}` instead of `\label{lower-bound}`).
This makes it easier to know what is being referenced when reading the TeX source.
Don't use different prefixes for theorems, lemmas, observations, claims;
use `thm:` for all of them (otherwise there's no point in using `cleveref`).

### Handle the warnings

Please read the warnings that are generated by TeX/LaTeX.
Most of them indicate something wrong with your document.

Overleaf has a pretty interface that extracts warnings from
the large amount of garbage that TeX outputs on `stdout`.
If you're using TeX on your own computer via the command line,
you may want to use an external tool to extract warnings.
I made one such tool: [github:sharmaeklavya2/tex-filter](https://github.com/sharmaeklavya2/tex-filter).

If you feel that a warning is a 'false alarm', then try to hide/suppress that warning.
Otherwise the output is so full of false warnings that useful warnings are hard to spot.

### Supply alt-text in section titles

If you `\usepackage{hyperref}`, then your PDF reader will show a table of contents.
However, this table can only contain simple text, not mathematical expressions.
Here's a screenshot of what happens if we include math in section titles.

<figure>
<img src="{static}/img/latex/bad-heading.png"/>
<figcaption>PDF opened in Google Chrome, showing garbled section titles in the table of contents.</figcaption>
</figure>

For this reason, LaTeX issues a warning whenever math is included in section titles.
To fix this, supply alternative plain text for titles using `\texorpdfstring`.
For example, change

    \subsection{$T_k^{d-1}(1-\eps)$-approximation in $n^{O_{\eps}(1)}$ time}

to

    \subsection{\texorpdfstring{$T_k^{d-1}(1-\eps)$}{T\_k\^{}(d-1)(1-eps)}-approximation
    in \texorpdfstring{$n^{O_{\eps}(1)}$}{n\^{}(O\_eps(1))} time}

<figure>
<img src="{static}/img/latex/good-heading.png"/>
<figcaption>PDF opened in Google Chrome, where section titles in the table of contents
are readable.</figcaption>
</figure>

### Multi-file projects and makefile

Suppose your document is split into multiple files, where the top-level file is called `main.tex`,
and you `\input` other files in `main.tex`. When you use `pdflatex` to compile `main.tex`,
the output will be named `main.pdf`.
If you use this naming scheme for all your documents, they will all be named `main.pdf`.
This can be a problem, depending on how you navigate your filesystem.
There are 2 ways of fixing this:

1.  *Change the output name*:
    Suppose you want your document to be named `number-theory.pdf`.
    Then instead of running

        pdflatex main.tex

    run

        pdflatex -jobname=number-theory main.tex

2.  *Change the input name*:
    Name the top-level document `number-theory.tex` instead of `main.tex`.
    But this can make it hard for others (or you, after a long time)
    to figure out which is the top-level tex file.

For both the options above, I recommend having a file named `makefile` in your project,
where you specify the compilation instructions. Thus, you not only document
the compilation instructions, but you can also quickly compile the project
by running <a href="https://en.wikipedia.org/wiki/Make_(software)"><code>make</code></a>
(if you're using a Unix-like system).

Here's an example `makefile`:

    INAME = main
    ONAME = number-theory
    default:
        pdflatex -jobname=$(ONAME) $(INAME).tex
        bibtex $(ONAME).aux
        pdflatex -jobname=$(ONAME) $(INAME).tex
        pdflatex -jobname=$(ONAME) $(INAME).tex

If you just want to see the commands and not run them, run `make --dry-run`.
For the above example, the output will be

    pdflatex -jobname=number-theory main.tex
    bibtex number-theory.aux
    pdflatex -jobname=number-theory main.tex
    pdflatex -jobname=number-theory main.tex

You can also add other commands to the makefile. For example, if you append

    clean:
        rm -f *.{aux,bbl,blg,log,out,toc}

to the `makefile`, then you can delete all intermediate files by running `make clean`.

## Tips for writing papers for submission

Publishers often have some requirements about the submission,
like the way metadata is formatted, page limit,
constraints on the tex source, bibliography format, etc.
Hence, authors need to make changes to their paper before submission.
This issue is exacerbated if the authors get one or more rejections and they resubmit elsewhere,
or they are also submitting to arXiv.

To make this just-before-submission process easier, I formulated some best practices
and wrote programs to automate a few tasks.

### Splitting a document into multiple tex files

A common practice is to split a LaTeX document into multiple files.
There is a file for each section, and they are all `\input` into a main file (usually named `main.tex`).
Some people, including me, like this approach for various reasons.

One disadvantage of such a splitting is that publishers often ask for a single tex file.
Then we need to copy-and-paste everything into a single file.
But this need not be a deterrent, because I automated this process:
[github:sharmaeklavya2/tex-flatten](https://github.com/sharmaeklavya2/tex-flatten).

Different versions of a paper
(e.g., arXiv version, conference version, journal version)
have different ways of specifying metadata,
like title, abstract, authors, their affiliations, etc.
They may even even use different `\documentclass`es.
However, the technical content is mostly the same.

To make it convenient to switch formats,
it's best to separate the venue-specific information from venue-independent information.
I usually do this by having different files for each venue/format,
like `main.tex`, `main-lipics.tex`, `main-snjnl.tex`, etc.
Each of these files only contain the venue-specific information,
and I `\input` the venue-independent information, like
the tex files for each section, macros, abstract, etc. in the main file.
By invoking `pdflatex` on each main document, I can get a PDF for every format.

### Easily convert abstract to plain text

Publishers often ask for a plain-text version of the abstract.
If the abstract contains mathematical expressions or citations, they would need to be changed.
I don't like to manually do this editing before each submission.
So I wrote a tool ([github:sharmaeklavya2/tex2text](https://github.com/sharmaeklavya2/tex2text))
to automatically do this conversion for me. To do this,
I put my abstract in a separate file (like `abstract.tex`) and `\input` it into my document.
My tool reads `abstract.tex` and outputs a plain text version by replacing LaTeX macros
by unicode/ascii characters.

## Collaborating with a git user

If you're using [git](https://en.wikipedia.org/wiki/Git),
or if you're using Overleaf and one of your co-authors uses git to access Overleaf,
follow these well-established git-friendly practices:

1.  Avoid very long lines in your `.tex` files.
    Perhaps you don't care because you have word-wrap on.
    But git tracks files line-by-line.
    Longer lines make it harder to do a `git diff` to see what has changed.
    Split long lines into multiple smaller lines.
2.  Avoid trailing whitespace. Git marks them as warnings during `git diff`.
